window.cartFetched=!1,window.iwtResetModalData=function(){iwtGetEl("iwt-table").innerHTML="";const t=iwtGetEl("iwt-quantity");t&&(t.value=1);const e=iwtGetEl("iwt-subtotal");e&&(e.value=0)},window.iwtCloseModal=function(t){t?.stopPropagation();const e=iwtGetEl("iwt-modal");e&&(e.style.display="none"),iwtResetModalData()},window.iwtOpenOfferModal=async function({template:t,dVID:e,sUrl:o}){console.log(` Opening Offer Modal | Template: ${t} | dVID: ${e} | sUrl: ${o}`);const n=iwtGetEl("iwt-modal");if("cart"!==t){if("product"===t||"iwantthat"===t||"iwtclearance"===t){const o=e||getVariantID(),n=getQuantity();if(!o)return console.error(" Variant ID not found, cannot add to cart."),void alert("Please select a product option before making an offer.");console.log(`ðŸ›’ Adding Product to Cart - ID: ${o}, Quantity: ${n}`);try{await iwtAddToCart({ID:o,quantity:n,template:t}),console.log(" Product added to cart")}catch(t){console.error(` Error adding product ${o} to the cart`,t)}console.log("ðŸ”¹ Fetching updated cart...");try{const t=await window.iwtFetchCart();window.iwtRenderTable(t)}catch(t){console.error(" Error fetching updated cart:",t)}}n.style.display="block",iwtSyncTableCart()}else{if(console.log("Fetching cart for cart page..."),"function"==typeof window.iwtFetchCart)try{const t=await window.iwtFetchCart();window.iwtRenderTable(t)}catch(t){console.error("Error fetching cart:",t)}else console.error(" Fetch Cart function is not available.");n.style.display="block"}};const getVariantID=()=>{const t=new URLSearchParams(window.location.search).get("variant"),e=document.querySelector('input[name="id"]:checked')?.value,o=document.querySelector('input[name="id"]')?.value;return t||e||o||null},getQuantity=()=>{const t=document.querySelector(".quantity__input");return t?parseInt(t.value,10):1};window.iwtSubmitOffer=function(t){console.log("Submitting offer:",t)},window.iwtDisplayResponse=function(t){console.log("Displaying response:",t)},window.iwtRetry=function(){iwtGetEl("iwt-response").style.display="none";const t=iwtGetEl("iwt-offer");t.classList.remove("fade-out"),t.style.display="flex",t.classList.add("fade-in"),console.log("Retry button clicked");const e=iwtGetEl("iwt-offer-price");e&&(e.value="")},document.addEventListener("DOMContentLoaded",(()=>{const t=iwtGetEl("iwt-modal");t&&t.addEventListener("click",(e=>{e.target===t&&iwtCloseModal()}))}));